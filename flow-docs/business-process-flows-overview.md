---
title: 業務プロセス フローの概要 | MicrosoftDocs
ms.custom: ''
ms.date: 06/27/2018
ms.reviewer: ''
ms.service: flow
ms.suite: ''
ms.tgt_pltfrm: ''
ms.topic: article
applies_to:
- Dynamics 365 (online)
- Dynamics 365 Version 9.x
- PowerApps
ms.assetid: 4469877e-bb95-481a-bc52-c9746f937ce5
caps.latest.revision: 16
ms.author: matp
manager: kvivek
search.app:
- Flow
search.audienceType:
- flowmaker
- enduser
ms.openlocfilehash: b1e23a3ddfd4302c4a5429029ea4fb47f0ab9808
ms.sourcegitcommit: 9ecf4956320d465a3bf618b79a9023b729d33c89
ms.translationtype: HT
ms.contentlocale: ja-JP
ms.lasthandoff: 03/06/2019
ms.locfileid: "57463013"
---
# <a name="business-process-flows-overview"></a>業務プロセス フローの概要

従業員が入力するデータの一貫性を維持し、従業員が顧客とともに作業するときに常に同じステップが実行されるようにするには、業務プロセス フローを作成します。 たとえば、顧客のサービス要求の処理方法がどの担当者でも同じになるようにしたり、注文前に請求書の承認を得ることを必須にしたりするには、業務プロセス フローを作成するとよいでしょう。 業務プロセス フローで使用される基盤テクノロジは他のプロセスと同じですが、提供される機能は、プロセスを使用する他の機能と大きく異なります。 業務プロセス フローの作成や編集の方法については、[業務プロセス フローの作成](create-business-process-flow.md)に関する記事を参照してください。  
  
 [業務プロセス フローに関する短いビデオ (4:49) を見る。](https://go.microsoft.com/fwlink/p/?linkid=842226)  
  
<a name="BKMK_Why"></a>   
## <a name="why-use-business-process-flows"></a>業務プロセス フローを使用する理由  
業務プロセス フローは、従業員が作業を行う際の指針となります。 これにより、ユーザー エクスペリエンスが能率化され、何らかの決定を下す前に必要となるやり取りのために組織が定義したプロセスを通じて、ユーザーをリードすることができます。 このユーザー エクスペリエンスは調整できるため、さまざまなセキュリティ ロールを持つ従業員が、自分の仕事に最適なエクスペリエンスを得ることができます。  
  
 業務プロセス フローを使用して、実行すべき一連のステップを定義すると、従業員を目的の結果に導くことができます。 これらのステップは、従業員が現在業務プロセスのどの位置にいるのかを知るための目印になります。 業務プロセス フローを導入すると、トレーニングの必要性が減少します。これは、新規の従業員が、どのエンティティを使用すべきかについて考える必要がなくなるためです。 新規の従業員であっても、プロセスに従って作業を行うことができます。 よく使用される営業手法をサポートするように業務プロセス フローを設定すると、営業グループは、よりよい結果を達成できるようになります。 また、サービス グループの場合、業務プロセス フローを使用すると、新規の従業員がすばやく期待に応え、ミスを避けることができるため、顧客満足度の低下を防ぐことができます。  
  
<a name="BKMK_What"></a>   
## <a name="what-can-business-process-flows-do"></a>業務プロセス フローでできること  
 業務プロセス フローでは、一連の*ステージ*と*ステップ*を定義します。定義したステージとステップは、フォーム上部のコントロールに表示されます。  
  
 ![ステージを含む業務プロセス](media/business-process-stages.png "ステージを含む業務プロセス")  
  
 各ステージには、ステップのグループが含まれます。 各ステップはフィールドとなっており、データを入力できるようになっています。 次のステージに進むには、**[次のステージ]** ボタンをクリックします。 あるステップを必須にし、対応するフィールドにデータを入力しないと次のステージに進めないようにすることもできます。 これは一般的に「ステージ ゲーティング」と呼ばれます。  
  
 業務プロセス フローは、データ入力エクスペリエンスの能率化や各ステージへの移動の制御は行いますが、条件ビジネス ロジックやオートメーションの実装は行っていないため、他のタイプのプロセスと比べて比較的シンプルです。 それでも、他のプロセスやカスタマイズと組み合わせたときは、従業員の時間の節約、トレーニング コストの削減、プロセス利用者の増加の点で、重要な役割を果たします。  

<a name="BKMK_BPFwithOtherCustomizations"></a>   
### <a name="business-process-flows-integrated-with-other-customizations"></a>業務プロセス フローと他のカスタマイズとの統合  
 業務プロセス フローを使用してデータを入力した場合、データの変更がフォームのフィールドにも適用されるため、ビジネス ルールまたはフォーム スクリプトで提供されるすべてのオートメーションを直ちに適用できます。 また、フォームにないフィールドの値を設定するステップを追加することもできます。これらのフィールドはフォーム スクリプトで使用される`Xrm.Page` オブジェクト モデルに追加されます。 フォームのデータを保存すると、業務プロセス フロー内のフィールドへの変更によって開始されるワークフローが適用されます。 リアルタイム ワークフローによってオートメーションが適用された場合、レコードの保存後にフォームのデータが更新されると、変更が直ちにユーザーに表示されます。  
  
 フォーム内の業務プロセス フローのコントロールは、クライアント側で直接プログラムできませんが、ビジネス ルールまたはフォーム スクリプトによって適用された変更は、業務プロセス フローのコントロールに自動的に適用されます。 フォームのフィールドを非表示にした場合は、業務プロセス フローのコントロールでも、そのフィールドが非表示になります。 ビジネス ルールまたはフォーム スクリプトを使用して値を設定した場合、その値は、業務プロセス フロー内に設定されます。  
  
### <a name="concurrent-process-flows"></a>同時プロセス フロー  
 同時業務プロセス フローでは、複数の業務プロセスを設定し、各業務プロセスを同じ開始レコードに関連付けることができます。 ユーザーは、同時に実行されている複数の業務プロセスを切り替えたり、前回作業したプロセス内のステージで作業を再開したりできます。  
  
<a name="BKMK_SystemBPF"></a>   
### <a name="system-business-process-flows"></a>システム業務プロセス フロー  
 以下の業務プロセス フローが組み込まれています。 業務プロセス フローの動作を理解するには、これらのシステム業務プロセス フローを確認してください。  
  
-   [Lead to Opportunity Sales Process]\(潜在顧客を営業案件売り上げにつなげるプロセス\)  
  
-   [Opportunity Sales Process]\(営業案件売り上げプロセス\)  
  
-   [Phone to Case Process]\(電話をケースにつなげるプロセス\)  
  
<a name="BKMK_multipleEntities"></a>   
## <a name="multiple-entities-in-business-process-flows"></a>業務プロセス フロー内の複数のエンティティ  
 1 つの業務プロセス フローを単一のエンティティに使用することも、複数のエンティティに使用することもできます。 たとえば、営業案件から開始し、見積もり、注文、請求書に進み、最後に戻って営業案件をクローズするプロセスを作成できます。  
  
 また、最大 5 つの異なるエンティティのレコードを結び付けて単一のプロセスを生成し、アプリを使用する従業員が、どのエンティティで作業しているかを意識せず、プロセスのフローに専念できる業務プロセス フローを設計できます。 従業員は、関連するエンティティ レコード間を簡単に移動できます。  
  
<a name="BKMK_MultipleBPF"></a>   
## <a name="multiple-business-process-flows-are-available-per-entity"></a>複数の業務プロセス フローがエンティティごとに使用可能  
 組織内のすべてのユーザーが同じプロセスに従うわけではないため、状況に応じてさまざまなプロセスを適用する必要があります。 エンティティごとに最大 10 個のアクティブな業務プロセス フローを使用して、状況ごとに適切なプロセスを適用できます。  
  
<a name="BPF_controlsWhichBPF"></a>   
### <a name="control-which-business-process-flow-will-be-applied"></a>適用する業務プロセス フローの制御  
 業務プロセス フローをセキュリティ ロールに関連付けると、そのセキュリティ ロールを持つ従業員のみが、業務プロセス フローを表示したり、使用したりできるようになります。 また、業務プロセス フローの順序を設定することができるため、どの業務プロセス フローを既定で設定するかを制御することもできます。 これを行う方法は、エンティティの複数のフォームを定義する方法と同じです。  
  
 新しいエンティティ レコードを作成するときは、使用できるアクティブな業務プロセス定義の一覧が、ユーザーのセキュリティ ロールでフィルタリングされます。 既定で適用される業務プロセス定義は、プロセス順序一覧に従ってユーザーのセキュリティ ロールで使用できる業務プロセス定義のうち、最初にアクティブ化されたものです。 アクティブな業務プロセス定義が 1 つ以上ある場合は、[プロセスの切り替え] ダイアログで別の定義を読み込むことができます。 プロセスを切り替えると、現在レンダリングされているプロセスは、バックグラウンドに移動し、選択したプロセスによって置き換えられます。ただし、その状態は維持されるため、復帰させることができます。 各レコードには、複数のプロセス インスタンスを関連付けることができます (異なる業務プロセス フロー定義ごとに合計で最大 10 個まで)。 フォームが読み込まれると、1 つの業務プロセス フローのみがレンダリングされます。 いずれかのユーザーが別のプロセスを適用した場合、そのプロセスは、そのユーザーに対してのみ、既定で読み込まれます。  
  
 すべてのユーザーに対して特定の業務プロセスが既定で読み込まれるようにするには (この動作は、プロセスを「ピン留め」するのと同じことです)、業務プロセス定義 ID に基づいて既存の業務プロセス インスタンスを読み込むカスタム クライアント API スクリプト (Web リソース) をフォームの読み込み時に追加します。 
 
  
<a name="BKMK_Considerations"></a>   
## <a name="business-process-flow-considerations"></a>業務プロセス フローに関する考慮事項  
 業務プロセス フローは、それがサポートされるエンティティに対してのみ定義できます。 追加できるプロセス、ステージ、ステップの数の制限にも注意する必要があります。  
  
### <a name="business-process-flows-that-call-a-workflow"></a>ワークフローを呼び出す業務プロセス フロー  
 業務プロセス フロー内からオンデマンドでワークフローを呼び出すことができます。 新しい業務プロセス フロー デザイナーからこれを設定するには、ワークフロー コンポーネントをプロセス ステージまたは [Global Workflows]\(グローバル ワークフロー\) セクションにドラッグします。 業務プロセス フロー内でワークフローを使用する方法の詳細については、「[Blog: Business process flow automation in Dynamics 365](https://blogs.msdn.microsoft.com/crm/2017/03/28/business-process-flow-automation-in-dynamics-365/)」 (ブログ: Dynamics 365 での業務プロセス フローの自動化) を参照してください。  
  
 ステージの終了時にトリガーするワークフローを業務プロセス フロー内に含める場合、そのステージがフロー内の最後のステージであるときは、ステージ完了時にワークフローがトリガーされるというメッセージが表示されます。 しかし、ステージは切り替わらないため、ワークフローはトリガーされません。 ステージ上でワークフローを含めないように指示する警告やエラーは表示されません。 業務プロセス フローと対話する場合、プロセスを終了または破棄しても、ステージが切り替わらないため、ワークフローはトリガーされません。 以下の例を検討してください。  
  
-   ステージが 2 つある業務プロセス フローを作成します。S1 は S2 に接続します。ステージ S2 上にワークフローがあり、トリガーを **[ステージの終了]** に設定します。  
  
-   ステージが 3 つある業務プロセス フローを作成します。S1 は S2 に接続し、S2 は S3 に分岐します。 S2 上にワークフローを組み込み、トリガーを **[ステージの終了]** に設定します。  
  
 ワークフローは、いずれの場合もトリガーされません。 この問題に対処するには、グローバル ワークフローを追加し、トリガーしたいワークフローをこのグローバル ワークフローに追加します。これにより、ワークフローのトリガーは、プロセスのステージではなく、業務プロセスに対して実行されます。 グローバル ワークフローのトリガーを [処理が中止されました] または [処理が完了しました] に設定すると、ユーザーが業務プロセスを破棄または完了したときにワークフローがトリガーされます。  
  
<a name="BKMK_Entities"></a>   
### <a name="entities-that-can-use-business-process-flows"></a>業務プロセス フローを使用できるエンティティ  
 業務プロセス フローは、すべてのカスタム エンティティが使用できます。 以下の標準エンティティも業務プロセス フローを使用できます。  
  
-   アカウント  
-   予定  
-   キャンペーン  
-   キャンペーン活動  
-   キャンペーンの反応  
-   競合企業  
-   連絡先  
-   メール  
-   エンタイトルメント  
-   FAX  
-   ケース  
-   請求書  
-   潜在顧客  
-   レター  
-   マーケティング リスト  
-   営業案件  
-   電話  
-   製品  
-   価格表品目  
-   見積もり  
-   定期的な予定  
-   営業資料  
-   ソーシャル活動  
-   注文  
-   ユーザー  
-   タスク  
-   チーム  
  
 業務プロセス フローのカスタム エンティティを有効にするには、エンティティ定義内で **[Business process flows (fields will be created)]\(業務プロセス フロー (フィールドが作成されます)\)** チェック ボックスをオンにします。 この操作は、元に戻せないことに注意してください。  
  
> [!NOTE]
>  移動した先の業務プロセス フローのステージに `Social Activity` エンティティが含まれている場合、**[次のステージ]** ボタンを選択すると、**[作成]** オプションが表示されます。 **[作成]** を選択すると、**[ソーシャル活動]** フォームが読み込まれます。 しかし、`Social Activity` は、アプリ ユーザー インターフェイスからの `Create` に対しては有効ではないため、フォームを保存することはできず、[予期しないエラー] というエラー メッセージが表示されます。  
  
<a name="BPF_MaxNumbers"></a>   
### <a name="maximum-number-of-processes-stages-and-steps"></a>プロセス、ステージ、およびステップの最大数  
 業務プロセス フローの使用を計画しているときは、ユーザー インターフェイスのパフォーマンスとユーザビリティを許容レベルにするため、いくつかの制限に注意する必要があります。  
  
-   アクティブにできる業務プロセス フローのプロセスは、エンティティごとに 10 個までです。  
  
-   各プロセスに含めることができるステージ数は、30 個までです。  
  
-   マルチエンティティ プロセスに含めることができるエンティティは、5 個までです。
  
## <a name="business-process-flow-entity-customization-support"></a>業務プロセス フロー エンティティのカスタマイズ サポート 

Dynamics 365 (オンライン) バージョン 9.0 アップデートに導入された業務プロセス フロー エンティティは、システム内に表示できるため、エンティティのレコード データをグリッド、ビュー、グラフ、およびダッシュボードで利用することが可能です。 

### <a name="use-business-process-flow-entity-records-with-grids-views-charts-and-dashboards"></a>グリッド、ビュー、グラフ、およびダッシュ ボードでの業務プロセス フロー エンティティのレコードの使用

業務プロセス フローがエンティティとして使用できるため、潜在顧客や営業案件などの特定のエンティティの業務プロセス フロー データから提供された高度な検索、ビュー、グラフ、およびダッシュボードを使用できるようになりました。 システムの管理者およびカスタマイザーは、他のエンティティで作成されたのと似た、カスタムの業務プロセス フローのグリッド、ビュー、グラフ、およびダッシュボードを作成できます。

**[Lead To Opportunity Sales Process]\(潜在顧客を営業案件売り上げにつなげるプロセス\)** などの業務プロセス フローは、カスタマイズ可能なエンティティとしてソリューション エクスプローラーに表示されます。

![[lead-to-opportunity process]\(潜在顧客を営業案件売り上げにつなげるプロセス\) エンティティが表示されているソリューション エクスプローラー](media/bpf-lead-solution-explorer.png)

既定の業務プロセス フローのビューにアクセスするには、まずソリューション エクスプローラーを開き、**[エンティティ]** を展開します。次に、必要なプロセス (**[Lead To Opportunity Sales Process]\(潜在顧客を営業案件売り上げにつなげるプロセス\)** など) を展開し、**[ビュー]** を選択して、必要なビューを選択します。

いくつかの既定のビューは、グラフとして表示できます (**[Active Opportunity Sales Process]\(アクティブな営業案件売り上げプロセス\)** ビューなど)。 

![[Active Opportunity Sales Process]\(アクティブな営業案件売り上げプロセス\) ビュー](media/bpf-default-view.png)

### <a name="interact-with-the-business-process-flow-entity-from-a-workflow"></a>ワークフローからの業務プロセス フロー エンティティとの対話
ワークフローから業務プロセス フロー エンティティと対話することも可能です。 たとえば、業務プロセス フロー エンティティ レコードのワークフローを作成し、営業案件エンティティ レコード上のフィールドが更新されたときに [アクティブ ステージ] を変更することができます。 手順の詳細については、「[Automate business process flow stages using workflows](https://blogs.msdn.microsoft.com/crminthefield/2017/12/18/automate-business-process-flow-stages-using-workflows)」 (ワークフローを使用した業務プロセス フローのステージの自動化) を参照してください。


### <a name="limitations-of-using-business-process-flow-entities"></a>業務プロセス フロー エンティティの使用に関する制限

- 現在のところ、業務プロセス フローに基づいてエンティティのカスタム フォームを作成することはできません。
- ソリューションに業務プロセス フロー エンティティが含まれる場合、この業務プロセス フロー エンティティは、エクスポートする前に、手動でソリューションに追加しておく必要があります。 そうしないと、業務プロセス フロー エンティティがソリューション パッケージに含まれません。 詳細情報: [ソリューション コンポーネントの追加](/powerapps/maker/model-driven-apps/create-solution#add-solution-components)

### <a name="next-steps"></a>次のステップ  
 [業務プロセス フローに関する短いビデオ (4:49) を見る](https://go.microsoft.com/fwlink/p/?linkid=842226)   
 [業務プロセス フローを作成する](create-business-process-flow.md)   
 [分岐を使用して業務プロセス フローを強化する](enhance-business-process-flows-branching.md) <br/>
 [ホワイト ペーパー: Dynamics 365 によるプロセスの有効化](http://download.microsoft.com/download/C/3/B/C3B46E35-9445-43B9-800B-474E022EE352/Process%20Enablement%20with%20Microsoft%20Dynamics%20CRM%202013.pdf)</br>
