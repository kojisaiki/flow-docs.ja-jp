---
title: Apps ワークフローのクラシック Common Data Service (CDS) | MicrosoftDocs
ms.custom: ''
ms.date: 08/06/2018
ms.reviewer: matp
ms.service: flow
ms.topic: article
ms.assetid: 1f3c9780-26ad-49ec-a3fb-fc226def19c5
author: msftman
ms.author: deonhe
manager: kvivek
search.app:
- Flow
search.audienceType:
- flowmaker
- enduser
ms.openlocfilehash: 5f3e2145741c96d20f73ff74f5fd6cc6c1cbb52e
ms.sourcegitcommit: 9ecf4956320d465a3bf618b79a9023b729d33c89
ms.translationtype: HT
ms.contentlocale: ja-JP
ms.lasthandoff: 03/06/2019
ms.locfileid: "57462912"
---
# <a name="classic-common-data-service-cds-for-apps-workflows"></a>Apps ワークフローのクラシック Common Data Service (CDS) 

ワークフローによってユーザー インターフェイスのない業務プロセスが自動化されます。 通常は、ユーザーの介入を必要としない自動化を開始するためにワークフロー プロセスを使用します。  
  
 各ワークフロー プロセスには 1 つのエンティティが関連付けられます。 ワークフローを構成するときは、主に次の 4 つの点について検討します。  
  
-   いつ開始するか  
  
-   リアルタイム ワークフローとバックグラウンド ワークフローのどちらとして実行するか  
  
-   どのようなアクションを実行するか  
  
-   アクションを実行する条件  
  
 このトピックでは、ワークフロー プロセスを探す方法を示し、いつ開始すべきか、リアルタイムとバックグラウンドのどちらで実行すべきかについて説明します。 実行する必要があるアクションや条件について詳しくは、[ワークフロー プロセスの構成](configure-workflow-steps.md)に関する記事をご覧ください。  
  
<a name="BKMK_WhereToCustomizeWorkflows"></a>   
## <a name="where-do-you-customize-workflow-processes"></a>どこでワークフロー プロセスをカスタマイズするか  
 組織のワークフローを確認するには、**[既定のソリューション]** の **[プロセス]** ノードを表示して、**[カテゴリ]** が **[ワークフロー]** のプロセスをフィルター処理します。  
  
 ![Dynamics 365 でワークフローによってフィルター処理されたプロセス](media/workflow-processes-filtered.PNG "Dynamics 365 でワークフローによってフィルター処理されたプロセス")  
  
 アプリの構築方法によって異なりますが、ユーザーがアプリ内でワークフローを作成または変更できます。 
 
開発者は、「[Dynamics 365 Customer Engagement の開発者ガイド](https://docs.microsoft.com/dynamics365/customer-engagement/developer/developer-guide)」の情報を使用してワークフローを作成できます。また、購入したソリューションに含まれるワークフローを変更できる場合もあります。  
  
<a name="BKMK_WorkflowProperties"></a>   
## <a name="workflow-properties"></a>ワークフローのプロパティ  
 ソリューション エクスプローラーで **[プロセス]** を選択し、**[新規]** をクリックします。  
  
 ワークフローを作成するとき、**[プロセスの作成]** ダイアログで、すべてのプロセスに含まれる 3 つのプロパティを設定する必要があります。  
  
 ![Dynamics 365 でのワークフローの作成](media/create-workflow.PNG "Dynamics 365 でのワークフローの作成")  
  
 **[プロセス名]**  
 ワークフロー プロセスの名前は一意にする必要はありませんが、多くのワークフローを使用する予定がある場合は、名前付け規則を使用してプロセスを明確に区別できるようにすることをお勧めします。 ワークフローの名前に標準のプレフィックスを付けるとよいでしょう。 プレフィックスによってワークフローの機能または社内の部門を示すことができます。 こうしておくと、ワークフローの一覧で類似した項目をまとめることができます。  
  
 **[カテゴリ]**  
 このプロパティによって、これがワークフロー プロセスであると設定されます。  
  
 **[エンティティ]**  
 各ワークフロー プロセスを 1 つのエンティティに対して設定する必要があります。 ワークフロー プロセスの作成後にエンティティを変更することはできません。  
  
 **[このワークフローをバックグラウンドで実行する (推奨)]**  
 このオプションは、カテゴリとしてワークフローを選択すると表示されます。 この設定により、ワークフローがリアルタイムかバックグラウンドかが決まります。 リアルタイム ワークフローはすぐに実行され (同期)、バックグラウンド ワークフローは非同期で実行されます。 使用可能な構成のオプションはこの設定によって変わります。 バックグラウンド ワークフローでは条件を待機できますが、これはリアルタイム ワークフローではできません。 このような待機条件を使用しない限り、後から、バックグラウンド ワークフローをリアルタイム ワークフローに、またはリアルタイム ワークフローをバックグラウンド ワークフローに変換できます。 待機条件について詳しくは、「[ワークフロー アクションの設定条件](configure-workflow-steps.md#BKMK_SettingConditionsForWorkflowActions)」をご覧ください。  
  
 新しいワークフローを最初から作成するか、既存のテンプレートに基づいて始めるように選択するかを指定する、**[タイプ]** オプションもあります。 **[New process from an existing template (select from list)]\(既存のテンプレートから新規プロセス (一覧から選択)\)** を選択すると、以前にプロセス テンプレートとして保存された、使用可能なワークフロー プロセスから選択できます。  
  
 ワークフローを作成した後、または既存のワークフローを編集した場合には、次の追加プロパティが用意されます。  
  
 ![ワークフローの [全般] タブ](media/create-workflow-general-tab.PNG "ワークフローの [全般] タブ")  
  
 **[次の種類としてアクティブ化]**  
 **[プロセス テンプレート]** を選択すると、他のテンプレートのために開始位置を前進させることができます。 ワークフローをアクティブ化した後では、このオプションを選択しても適用されません。代わりに、**[タイプ]**: **[既存テンプレートからのプロセスの新規作成 (一覧から選択)]** を選択すると、**[プロセスの作成]** ダイアログで選択できるようになります。  
  
 プロセス テンプレートが役立つのは、類似したワークフロー プロセスが多数あり、同じロジックを複製せずに定義する必要がある場合です。  
  
> [!NOTE]
>  プロセス テンプレートを編集しても、以前にそれを使用して作成された他のすべてのワークフロー プロセスの動作は変更されません。 テンプレートを使用して作成される新しいワークフローには、テンプレートの内容がコピーされます。  
  
 **[実行可能なワークフロー]**  
 このセクションには、どのようにワークフローを実行できるか示すオプションが含まれています。  
  
 **[このワークフローをバックグラウンドで実行する (推奨)]**  
 このチェック ボックスは、ワークフローを作成したときに選択したオプションを反映しています。 このオプションは無効ですが、**[アクション]** メニューで、**[リアルタイム ワークフローに変換]** または **[バックグラウンド ワークフローに変換]** を選択して変更できます。  
  
 **[オンデマンド プロセスとして]**  
 ユーザーがこのワークフローを **[ワークフローの実行]** コマンドで実行できるようにする場合は、このオプションを選択してください。  
  
 **[子プロセスとして]**  
 ワークフローを別のワークフローから開始できるようにするには、このオプションを選択してください。  
  
 **[ワークフロー ジョブの保持]**  
 このセクションには、ワークフローの実行が完了した後にワークフローを削除するオプションが含まれています。  
  
 **[完了したワークフロー ジョブを自動的に削除する (ディスク容量の確保)]**  
 完了したワークフロー ジョブを自動的に削除するには、このオプションを選択します。  
  
> [!NOTE]
>  ワークフロー ジョブは完了時にすぐ削除されるのではなく、しばらくしてからバッチ プロセスによって削除されます。  
  
 **[スコープ]**  
 ユーザー所有のエンティティの場合、オプションは、**[組織]**、**[部署配下]**、**[部署]**、または **[ユーザー]** です。 組織所有エンティティの場合、オプションは **[組織]** のみです。  
  
 スコープが **[組織]** の場合、ワークフロー ロジックを組織のどのレコードにも適用できます。 それ以外の場合、ワークフローは、スコープ内に含まれるレコードのサブセットにしか適用できません。  
  
> [!NOTE]
>  既定のスコープの値は **[ユーザー]** です。 スコープの値が適切であることを確認してからワークフローをアクティブ化してください。  
  
 **[Start When]\(開始のタイミング\)**  
 このセクションのオプションを使用して、ワークフローをいつ自動的に開始するかを指定します。 リアルタイム ワークフローは特定のイベントの前に実行するように構成できます。 これは、ワークフローがアクションを発生前に停止できるため、きわめて強力な機能です。 詳細情報: [リアルタイム ワークフローを使用する](configure-workflow-steps.md#BKMK_SynchronousWorkflows) 次のようなオプションがあります。  
  
- **[レコードの作成]**  
  
- **[レコードの状態の変更]**  
  
- **[レコードの割り当て]**  
  
- **[レコード フィールドの変更]**  
  
- **[レコードの削除]**  
  
> [!NOTE]
>  ワークフローについて定義するアクションと条件は、ワークフローの実行時を認識していないことに注意してください。 たとえば、ワークフローでレコードを更新すると定義した場合、レコードが作成される前には、このアクションをリアルタイム ワークフローで実行することはできません。 存在しないレコードは更新できません。 同じく、バックグラウンド ワークフローにレコードを更新するアクションが定義されていたとしても、削除されたレコードは更新できません。 ワークフローで実行するように構成したアクションが実行できない場合、そのアクションが失敗し、ワークフロー全体が失敗します。  
  
 **[実行時の権限]**  
 このオプションを選択できるのは、ワークフローの作成時に **[このワークフローをバックグラウンドで実行する (推奨)]** オプションを選択していない場合または、後からバックグラウンド ワークフローをリアルタイム ワークフローに変換した場合です。  
  
<a name="BKMK_SecurityContextOfWorkflowProcesses"></a>   
## <a name="security-context-of-workflow-processes"></a>ワークフロー プロセスのセキュリティ コンテキスト  
 バックグラウンド ワークフローがオンデマンド プロセスとして構成され、ユーザーが **[ワークフローの実行]** コマンドを使用して開始した場合、ワークフローが実行できるアクションは、ユーザーが権限に基づいて実行できるアクションと、ユーザー アカウントに設定されたセキュリティ ロールで定義されたアクセス レベルに制限されます。  
  
 バックグラウンド ワークフローがイベントに基づいて開始する場合、そのワークフローは所有するユーザー (通常はワークフローを作成したユーザー) のコンテキストで作動します。  
  
 リアルタイム ワークフローの場合は、**[実行時の権限]** オプションがあります。また、ワークフローによって、ワークフローの所有者のセキュリティ コンテキストを適用するか、レコードに変更を行うユーザーのセキュリティ コンテキストを適用するかを選択できます。 ワークフローに含まれるアクションが、セキュリティ制約のためにすべてのユーザーが実行できるわけではない場合、ワークフローの所有者としてワークフローを実行するように選択する必要があります。  
  
<a name="BKMK_ActivatingWorkflows"></a>   
## <a name="activate-a-workflow"></a>ワークフローをアクティブ化する  
 ワークフローを編集できるのはアクティブ化されていないときだけです。 ワークフローを手動で使用する前、またはイベントに合わせて適用する前に、アクティブ化する必要があります。 ワークフローをアクティブにするためには、少なくとも 1 つのステップが含まれていることが必要です。 ステップの構成について詳しくは、[ワークフロー プロセスの構成](configure-workflow-steps.md)に関する記事をご覧ください。  
  
 ワークフローのアクティブ化または非アクティブ化をできるのは、ワークフローの所有者か、**[別のユーザーの代わりに操作します]** 権限を持つユーザー (システム管理者など) です。  これは、悪意のあるユーザーが、気付かれずに他のユーザーのワークフローを変更しないようにするためです。 所有者を変更することで、自分が所有するワークフローを再割り当てすることができます。 このフィールドは、**[管理]** タブにあります。システム管理者でない場合、または別のユーザーが所有するワークフローを編集する必要がある場合は、その所有者にワークフローの非アクティブ化と割り当てを行ってもらう必要があります。 ワークフローの編集が完了した後で、割り当てを元に戻して、アクティブ化してもらうことができます。  
  
 リアルタイム ワークフローの場合、ユーザーに **[リアルタイム プロセスのアクティブ化]** 権限があることが必要です。 リアルタイム ワークフローはシステム パフォーマンスに影響するリスクが高いため、この権限は潜在的なリスクを評価できるユーザーのみに与える必要があります。  
  
 ワークフローはアクティブ化されたときに保存されるため、アクティブ化の前に保存する必要はありません。  
  
## <a name="next-steps"></a>次のステップ  
 [ワークフロー プロセスの構成](configure-workflow-steps.md)  <br/>
[業務プロセス フローへのオンデマンド ワークフローの追加](bpf-add-on-demand-workflow.md) 

